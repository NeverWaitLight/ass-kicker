## 1 引入多协议抽象与配置结构

- [x] 1.1 梳理现有阿里云邮件 sender 相关代码和配置字段定位所有调用点与依赖关系
- [x] 1.2 在领域或应用层定义协议无关的邮件发送接口以及通用邮件模型
- [x] 1.3 设计并实现顶层邮件配置结构包含启用协议类型字段及各协议子配置块

## 2 协议实现与工厂装配

- [x] 2.1 实现 smtp 协议 sender 封装连接池认证加密超时与重试策略
- [x] 2.2 实现 http api 协议 sender 封装请求构造认证重试与错误解析
- [x] 2.3 实现基于配置的 sender 工厂或依赖注入绑定在运行时根据协议类型选择具体实现

## 3 迁移现有调用与移除阿里云 sender

- [x] 3.1 将所有直接依赖阿里云 sender 的业务代码迁移到新的邮件发送接口抽象上
- [x] 3.2 从配置中心和环境变量中移除阿里云邮件专用字段并替换为协议相关通用字段
- [x] 3.3 从依赖管理中移除阿里云邮件 sdk 或将其隔离为非默认可选模块

## 4 测试验证与运维支持

- [x] 4.1 为 smtp 与 http api 两种协议实现补充单元测试和集成测试覆盖成功失败超时和重试场景
- [ ] 4.2 在预发环境分别以 smtp 和 http api 协议进行灰度验证并对比行为与日志
- [ ] 4.3 更新运维文档说明两种协议的配置方式迁移步骤以及常见故障排查指引

