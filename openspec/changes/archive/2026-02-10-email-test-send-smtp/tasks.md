## 1. 后端配置与协议支持

- [x] 1.1 新增邮件协议配置 schema 定义与获取接口（包含 SMTP 字段、必填与默认值）
- [x] 1.2 实现 SMTP 配置解析与校验，将 properties 映射为 EmailSenderProperties
- [x] 1.3 提供按协议构建 Sender 的工厂/构建器（SMTP/HTTP_API）

## 2. 测试发送流程改造

- [x] 2.1 调整测试发送使用临时配置构建 sender 并在完成后销毁
- [x] 2.2 增强测试发送日志（开始、构建、结果、异常）且避免输出敏感信息

## 3. 前端通道配置与测试发送

- [x] 3.1 邮件类型通道增加协议选择 UI，并默认 SMTP
- [x] 3.2 选择 SMTP 时自动加载必填配置项与默认值提示
- [x] 3.3 组装测试发送 payload，确保 protocol 与 smtp 配置结构符合后端解析

## 4. 测试与验证

- [x] 4.1 后端测试覆盖 SMTP 配置缺失/成功的测试发送
- [x] 4.2 前端流程测试覆盖邮件协议选择与字段自动加载
